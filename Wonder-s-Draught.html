<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draughts Game</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }

        h1, p {
            margin: 20px 0;
        }

        #board {
            display: grid;
            grid-template-columns: repeat(8, 50px);
            grid-template-rows: repeat(8, 50px);
            gap: 0;
        }

        .square {
            width: 50px;
            height: 50px;
            box-sizing: border-box;
        }

        .dark {
            background-color: black;
        }

        .light {
            background-color: yellow;
        }

        .piece {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .red {
            background-color: red;
        }

        .blue {
            background-color: blue;
        }

        .king {
            border: 2px solid gold;
        }

        #welcome, #game-record {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Draughts Game</h1>
    <div id="welcome"></div>
    <div id="board"></div>
    <div id="game-record"></div>
    <script>
        let currentPlayer = 'red';
        let board, squares, pieces;
        let userName = '';
        let gameCount = 0;
        let userWins = 0;
        let aiWins = 0;

        // Initialize the game
        function startGame() {
            userName = prompt("Enter your name:");
            document.getElementById('welcome').innerHTML = `Welcome ${userName}. Would you like to play against Wonder? (yes/no)`;
            const playAgainstWonder = prompt("Would you like to play against Wonder? (yes/no)").toLowerCase() === 'yes';
            if (playAgainstWonder) {
                initBoard();
                document.getElementById('game-record').innerText = `Games Played: ${gameCount}\nUser Wins: ${userWins}\nAI Wins: ${aiWins}`;
            } else {
                document.getElementById('welcome').innerHTML = "Maybe next time!";
            }
        }

        // Initialize board and pieces
        function initBoard() {
            board = document.getElementById('board');
            squares = [];
            pieces = [];
            const rows = 8;
            const cols = 8;

            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    const square = document.createElement('div');
                    square.className = 'square ' + ((row + col) % 2 === 0 ? 'light' : 'dark');
                    square.dataset.row = row;
                    square.dataset.col = col;
                    board.appendChild(square);
                    squares.push(square);
                }
            }

            // Initialize pieces
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    if ((row + col) % 2 !== 0 && (row < 3 || row > 4)) {
                        const piece = document.createElement('div');
                        piece.className = 'piece ' + (row < 3 ? 'red' : 'blue');
                        piece.draggable = true;
                        piece.dataset.row = row;
                        piece.dataset.col = col;
                        piece.addEventListener('dragstart', dragStart);
                        piece.addEventListener('dragend', dragEnd);
                        squares[row * cols + col].appendChild(piece);
                        pieces.push(piece);
                    }
                }
            }

            // Update game count
            gameCount++;
        }

        // Drag and drop functions
        function dragStart(e) {
            e.dataTransfer.setData('text', `${this.dataset.row},${this.dataset.col}`);
        }

        function dragEnd(e) {
            const [fromRow, fromCol] = e.dataTransfer.getData('text').split(',').map(Number);
            const toSquare = document.elementFromPoint(e.clientX, e.clientY);
            if (toSquare) {
                const toRow = Number(toSquare.dataset.row);
                const toCol = Number(toSquare.dataset.col);

                if (isValidMove(fromRow, fromCol, toRow, toCol)) {
                    movePiece(fromRow, fromCol, toRow, toCol);
                    if (toRow === 0 && currentPlayer === 'red' || toRow === 7 && currentPlayer === 'blue') {
                        promoteToKing(toRow, toCol);
                    }
                    currentPlayer = currentPlayer === 'red' ? 'blue' : 'red';
                    if (currentPlayer === 'blue') {
                        setTimeout(aiMove, 500); // AI move with delay
                    }
                }
            }
        }

        function isValidMove(fromRow, fromCol, toRow, toCol) {
            const fromSquare = squares[fromRow * 8 + fromCol];
            const toSquare = squares[toRow * 8 + toCol];
            return (Math.abs(fromRow - toRow) === 1 && Math.abs(fromCol - toCol) === 1) && toSquareEmpty(toRow, toCol);
        }

        function toSquareEmpty(row, col) {
            return !squares[row * 8 + col].hasChildNodes();
        }

        function movePiece(fromRow, fromCol, toRow, toCol) {
            const piece = squares[fromRow * 8 + fromCol].removeChild(squares[fromRow * 8 + fromCol].firstChild);
            squares[toRow * 8 + toCol].appendChild(piece);
            piece.dataset.row = toRow;
            piece.dataset.col = toCol;
        }

        function promoteToKing(row, col) {
            const piece = squares[row * 8 + col].firstChild;
            piece.classList.add('king');
        }

        function aiMove() {
            const availableMoves = pieces.filter(piece => piece.classList.contains('blue'));
            if (availableMoves.length === 0) {
                endGame('User'); // User wins if AI has no pieces
                return;
            }

            // Simple AI logic: Move a random piece to an empty diagonal square
            const randomPiece = availableMoves[Math.floor(Math.random() * availableMoves.length)];
            const fromRow = Number(randomPiece.dataset.row);
            const fromCol = Number(randomPiece.dataset.col);

            // Collect possible moves
            const moveOptions = [];
            for (let row = -1; row <= 1; row += 2) {
                for (let col = -1; col <= 1; col += 2) {
                    const toRow = fromRow + row;
                    const toCol = fromCol + col;
                    if (toRow >= 0 && toRow < 8 && toCol >= 0 && toCol < 8) {
                        if (toSquareEmpty(toRow, toCol)) {
                            moveOptions.push({ toRow, toCol });
                        }
                    }
                }
            }

            if (moveOptions.length > 0) {
                const { toRow, toCol } = moveOptions[Math.floor(Math.random() * moveOptions.length)];
                movePiece(fromRow, fromCol, toRow, toCol);
                if (toRow === 0) {
                    promoteToKing(toRow, toCol);
                }
                currentPlayer = 'red';
                if (checkGameEnd()) {
                    endGame('Wonder'); // AI wins if the user has no pieces
                }
            }
        }

        function checkGameEnd() {
            // Check if any red pieces are left
            return !document.querySelectorAll('.red').length;
        }

        function endGame(winner) {
            if (winner === 'User') {
                userWins++;
                document.getElementById('welcome').innerText = `${userName} wins!`;
            } else if (winner === 'Wonder') {
                aiWins++;
                document.getElementById('welcome').innerText = `Wonder wins!`;
            }
            document.getElementById('game-record').innerText = `Games Played: ${gameCount}\nUser Wins: ${userWins}\nAI Wins: ${aiWins}`;
        }

        // Start the game
        startGame();
    </script>
</body>
</html>

