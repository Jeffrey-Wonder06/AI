                'U': 1,
                'V': 4, 'W': 4, 'X': 8, 'Y': 4, 'Z': 10
            };
            return scores[letter] || 0;
        }

        document.getElementById('submit-move').addEventListener('click', () => {
            // Calculate and update player score
            const moveScore = calculateScore(board);
            playerScore += moveScore;
            document.getElementById('player-score').textContent = playerScore;

            // Refill the rack and update the board
            refillRack(playerRack, tileBag, 7);
            renderBoard();
            updateRack();

            // Check if the game has ended
            if (tileBag.length === 0) {
                alert("The game has ended! Final scores:\nPlayer: " + playerScore + "\nAI: " + aiScore);
                return;
            }

            // Let the AI make a move
            aiMove();
        });

        document.getElementById('refill-rack').addEventListener('click', () => {
            refillRack(playerRack, tileBag, 7);
            renderBoard();
            updateRack();
        });

        function refillRack(rack, bag, desiredLength) {
            // Add new letters to the rack until it reaches the desired length
            while (rack.length < desiredLength && bag.length > 0) {
                const index = Math.floor(Math.random() * bag.length);
                rack.push(bag.splice(index, 1)[0]);
            }
            // If the rack length exceeds desiredLength, trim it
            if (rack.length > desiredLength) {
                rack.length = desiredLength;
            }
            return rack;
        }

        function aiMove() {
            const possibleWords = findPossibleWords(playerRack, scrabbleDictionary);
            const validMoves = findValidPlacements(board, possibleWords);
            const bestMove = validMoves.length > 0 ? validMoves[0] : null;

            if (bestMove) {
                const [word, position] = bestMove;
                placeWord(board, word, position);
                const moveScore = calculateScore(board);
                aiScore += moveScore;
                document.getElementById('ai-score').textContent = aiScore;
                playerRack = refillRack(playerRack, tileBag, 7);
                renderBoard();
                updateRack();
            }
        }

        function findPossibleWords(rack, dictionary) {
            // Example implementation: You need to implement actual word finding logic
            // For now, return a mock array of words
            return [
                ['WORD', [7, 7]], // Example word placement
                // Add more words and positions as needed
            ];
        }

        function findValidPlacements(board, possibleWords) {
            // Example implementation: You need to implement actual placement validation logic
            // For now, return the mock valid moves
            return possibleWords; // This is a placeholder; replace with actual validation
        }

        function placeWord(board, word, position) {
            // Example implementation: Place the word on the board at the given position
            const [startRow, startCol] = position;
            for (let i = 0; i < word.length; i++) {
                board[startRow][startCol + i] = word[i]; // Horizontal placement (for simplicity)
            }
            renderBoard();
        }

        // Initialize the board when the page loads
        init();
    </script>
</body>
</html>




                    













